<!DOCTYPE html><html><head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  Lemon </title>

 
  
    <link rel="icon" href="/images/favicon.png">
  


  
<link rel="stylesheet" href="/nayo.min.css">
 
<meta name="generator" content="Hexo 5.2.0"></head>  
  <body>   
    
      <header class="header-wrapper">

  <nav class="inner">
    <div class="title">
      <a href="/">
        <img class="logo" src="/images/logo.png">
      </a>
    </div>

    <ul class="menu">
      
      
      <li class="item">
        <a class="link" id="menu-home" href="/">
          <i class="iconfont icon-home">
        </i></a><i class="iconfont icon-home">
      </i></li><i class="iconfont icon-home">
      
      
      
      <li class="item">
        <a class="link" id="menu-archives" href="/archives">
          <i class="iconfont icon-archives">
        </i></a><i class="iconfont icon-archives">
      </i></li><i class="iconfont icon-archives">
      
      
      
      <li class="item">
        <a class="link" id="menu-tags" href="/tags">
          <i class="iconfont icon-tags">
        </i></a><i class="iconfont icon-tags">
      </i></li><i class="iconfont icon-tags">
      
      
      
      <li class="item">
        <a class="link" id="menu-about" href="/about">
          <i class="iconfont icon-about">
        </i></a><i class="iconfont icon-about">
      </i></li><i class="iconfont icon-about">
      
      
      
      <li class="item">
        <a class="link" id="menu-search">
          <i class="iconfont icon-search">
        </i></a><i class="iconfont icon-search">
        

        
      
    </i></li></i></i></i></i></ul><i class="iconfont icon-home"><i class="iconfont icon-archives"><i class="iconfont icon-tags"><i class="iconfont icon-about"><i class="iconfont icon-search">
  </i></i></i></i></i></nav><i class="iconfont icon-home"><i class="iconfont icon-archives"><i class="iconfont icon-tags"><i class="iconfont icon-about"><i class="iconfont icon-search">
</i></i></i></i></i></header><i class="iconfont icon-home"><i class="iconfont icon-archives"><i class="iconfont icon-tags"><i class="iconfont icon-about"><i class="iconfont icon-search">

<header class="mobile-header-wrapper">
  <i id="mobile-toggle" class="iconfont icon-menu mobile-toggle"></i>
</header>   

      <div class="container">       
          
          
            <div class="container-inner">  
          

          


<div class="index slideDownMin">
	

	<div class="profile">

		<img class="avatar" src="/images/avatar.jpg">

		<p class="author">Lemon</p>

		<div class="social">
			
			
			<a target="_blank" class="links" href="https://github.com/Lemonreds/hexo-theme-nayo">
				<i class="iconfont icon-Github">
			</i></a><i class="iconfont icon-Github">
			
			
			<a target="_blank" class="links" href>
				<i class="iconfont icon-Weibo">
			</i></a><i class="iconfont icon-Weibo">
			
			
			<a target="_blank" class="links" href>
				<i class="iconfont icon-Twitter">
			</i></a><i class="iconfont icon-Twitter">
			
			
			<a target="_blank" class="links" href>
				<i class="iconfont icon-instagram">
			</i></a><i class="iconfont icon-instagram">
			
			
			<a target="_blank" class="links" href>
				<i class="iconfont icon-Neteasemusic">
			</i></a><i class="iconfont icon-Neteasemusic">
			
			
			<a target="_blank" class="links" href="/">
				<i class="iconfont icon-Telegram">
			</i></a><i class="iconfont icon-Telegram">
			
			
		</i></i></i></i></i></i></div><i class="iconfont icon-Github"><i class="iconfont icon-Weibo"><i class="iconfont icon-Twitter"><i class="iconfont icon-instagram"><i class="iconfont icon-Neteasemusic"><i class="iconfont icon-Telegram">
	</i></i></i></i></i></i></div><i class="iconfont icon-Github"><i class="iconfont icon-Weibo"><i class="iconfont icon-Twitter"><i class="iconfont icon-instagram"><i class="iconfont icon-Neteasemusic"><i class="iconfont icon-Telegram">


	

	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/08/12/multicoreos64-day6/">64bit 멀티코어 OS 원리와 구조 - Day 6</a>  
	       
		 

		<div class="meta">
			<time>Aug 12, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h1 id="IA-32e-모드용-세그먼트-디스크립터-추가"><a href="#IA-32e-모드용-세그먼트-디스크립터-추가" class="headerlink" title="IA-32e 모드용 세그먼트 디스크립터 추가"></a>IA-32e 모드용 세그먼트 디스크립터 추가</h1><p>리얼 모드에서 보호 모드로 전환에서 보호 모드용 세그먼트 디스크립터가 필요했듯이, 보호 모드에서 IA-32e 모드로 전환하기 위해서도 IA-32e 모드용 세그먼트 디스크립터가 필요하다.</p>
<p>IA-32e 모드 커널용 코드 디스크립터와 데이터 디스크텁는 앞서 보호 모드와 방법이 유사하다. 이유는 보호 모드 세그먼트 디스크립터와 거의 같은 크기와 필드를 가지고 있기 때문이다. 차이점은 IA-32e 모드에서는 디스크립터의 기준 주소, 세그먼트 크기 값에 상관없이 64GB 전체 영역으로 설정된다. 또 세그먼트 디스크립터의 L비트가 호환 모드 or 64bit 모드를 선택하는 데 사용된다.</p>
<p>우리의 경우 64비트 모드를 사용하기 때문에, L비트를 1, D비트를 0으로 설정한다.<br>##</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/08/12/multicoreos64-day6/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/08/11/nodejs-study-day1/">Express.js 스터디 1</a>  
	       
		 

		<div class="meta">
			<time>Aug 11, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<h1 id="Express-js-스터디-1일"><a href="#Express-js-스터디-1일" class="headerlink" title="Express.js 스터디 1일"></a>Express.js 스터디 1일</h1><h2 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h2><p>Express.js를 사용하기 위해서는 먼저 node.js와 NPM이 설치된 상황에서 진행할 수 있다. 윈도우 기준으로 <a target="_blank" rel="noopener" href="https://nodejs.org/ko/">Node.js 공식 홈페이지</a>에서 설치파일을 다운로드 받을 수 있다.</p>
<p>설치가 완려되면 아래의 명령어를 통해 express.js를 설치한다.</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 종속성 항목을 추가하며 설치</span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install express --save</span></span><br><span class="line"></span><br><span class="line">// 종속성 항목을 추가하지 않고 설치</span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install express</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello, World!"></a>Hello, World!</h2><p>설치가 완료되면 app.js를 통해 간단한 예제를 작성하여 테스트할 수 있다.</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function">(<span class="params">req, res</span>) =></span> {</span><br><span class="line">  res.send(<span class="string">'Hello World!'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">app.listen(port, <span class="function">() =></span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Example app listening at http://localhost:<span class="subst">${port}</span>`</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">node app.js</span></span><br></pre></td></tr></tbody></table></figure>

<p>1행에서 express 모듈을 불러와 2행에 express 모듈의 인스턴스를 생성한다. 생성된 express 인스턴스인 app을 통해 5행에서 ‘/‘ 경로에 대한 GET메소드 라우트를 지정하고 listen을 통해 서버를 열게 된다. 이렇듯 node.js는 매우 간단하게 웹 애플리케이션을 생성할 수 있게 된다.</p>
<h2 id="Express-generator"><a href="#Express-generator" class="headerlink" title="Express generator"></a>Express generator</h2><p>Express generator를 통해 간편하게 애플리케이션의 골격을 생성할 수 있다.</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install express-generator -g</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npx express-generator <APP NAME> --view=pug</span></span><br></pre></td></tr></tbody></table></figure>

<p>첫번째 명령어를 통해서 express-generator를 전역으로 설치하고, 두번째 명령어를 통해서 <code>APP NAME</code>에 해당하는 express 애플리케이션이 생성된다. 여기서 <code>--view=pug</code>는 뷰 엔진에 해당하며 <code>ejs, hbs, hjs, jade, pug, twig, vash</code>등이 있다. 기본으로 jade로 지정되며 만약 뷰 엔진이 필요없는 경우 <code>--no-view</code>를 이용해 생성할 수 있다뷰</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> myapp</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install</span></span><br></pre></td></tr></tbody></table></figure>

<p>생성 이후 express 애플리케이션 내부로 폴더를 이용해 종속성을 설치하면 기초 개발 준비가 끝나게 된다.</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── bin</span><br><span class="line">│   └── www</span><br><span class="line">├── package.json</span><br><span class="line">├── public</span><br><span class="line">│   ├── images</span><br><span class="line">│   ├── javascripts</span><br><span class="line">│   └── stylesheets</span><br><span class="line">│       └── style.css</span><br><span class="line">├── routes</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── users.js</span><br><span class="line">└── views</span><br><span class="line">    ├── error.pug</span><br><span class="line">    ├── index.pug</span><br><span class="line">    └── layout.pug</span><br></pre></td></tr></tbody></table></figure>

<p>파일의 구조에서 Javascript와 관련된 폴더 및 파일은 <code>app.js, bin/www, routes/*</code>이며 웹 리소스&템플릿에 관련된 폴더는 <code>public/*, views/*</code>에 해당된다.</p>
<p>bin/www에서는 서버 구동과 관련된 코드가 포함되어 있고, app.js에서는 routes/*의 라우터들과 리소스 폴더 및 뷰 템플릿 폴더를 지정하는 등 서버 구동 이전에 필요한 설정을 하게 된다.</p>
<h2 id="기본-라우팅"><a href="#기본-라우팅" class="headerlink" title="기본 라우팅"></a>기본 라우팅</h2><p>app.js를 자세히 보면</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// view engine setup</span></span><br><span class="line">app.set(<span class="string">'views'</span>, path.join(__dirname, <span class="string">'views'</span>));</span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'pug'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>먼저 뷰 엔진을 지정하며 뷰 엔진의 종류는 위 express-generator에 –view 인자를 지정된 엔진을 사용한다.</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(logger(<span class="string">'dev'</span>));</span><br><span class="line">app.use(express.json());</span><br><span class="line">app.use(express.urlencoded({ <span class="attr">extended</span>: <span class="literal">false</span> }));</span><br><span class="line">app.use(cookieParser());</span><br></pre></td></tr></tbody></table></figure>

<p>개발에 유용한 다양한 미들웨어를 추가하고 리소스파일(js, css, image등)의 경로를 지정하게 된다.</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/'</span>, indexRouter);</span><br><span class="line">app.use(<span class="string">'/users'</span>, usersRouter);</span><br></pre></td></tr></tbody></table></figure>

<p>use는 미들웨어로 등록할 callback함수를 인자로 받는데, 첫번째 인자로 경로를 줄 경우 해당 경로에 대한 미들웨어를 추가할 수 있다. 이 경우 routes/*에 있는 라우트를 미들웨어로 등록하는데 각각 ‘/‘, ‘/users’경로를 구분하여 등록하게 된다. 때문에 두 라우터는 별개의 상황에서 동작하게 된다.</p>
<h2 id="정적-파일-제공"><a href="#정적-파일-제공" class="headerlink" title="정적 파일 제공"></a>정적 파일 제공</h2><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(path.join(__dirname, <span class="string">'public'</span>)))</span><br></pre></td></tr></tbody></table></figure>

<p>정적 파일을 제공하기 위해서는 정적 파일이 존재하는 경로를 static 미들웨어 함수를 통해 등록할 필요가 있다.</p>
<p>static을 통해 여러 정적 파일 경로를 등록할 경우 등록된 순서에 따라 정적 파일을 검색한다. 이 부분도 use의 첫번째 인자로 경로를 주게 되면 가상 경로로 지정할 수 있다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/Study/">Study</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/javascript/">javascript</a>           
			            
				<a class="link" href="/tags/node-js/">node.js</a>           
			            
				<a class="link" href="/tags/express-js/">express.js</a>           
			            
				<a class="link" href="/tags/webdev/">webdev</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/08/11/nodejs-study-day1/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/06/10/basic-dp-algorithm/">기초 DP알고리즘 문제</a>  
	       
		 

		<div class="meta">
			<time>Jun 10, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		 
			<h1 id="배낭-알고리즘-a-k-a-Knapsack-problem"><a href="#배낭-알고리즘-a-k-a-Knapsack-problem" class="headerlink" title="배낭 알고리즘(a.k.a Knapsack problem)"></a>배낭 알고리즘(a.k.a Knapsack problem)</h1><p>배낭 알고리즘은 쪼갤 수 없는 물건이 제한된 가방에 최대한의 가치로 담는 문제이다. Fractional Knapsack 문제는 탐욕 알고리즘으로 풀 수 있었지만, 조건에서 쪼갤 수 있어서 가능했다. 앞서 쪼갤 수 없는 물건을 최대한의 가치를 가지며 담기 위해서는 DP를 통해서 해결하게 된다.</p>
<p><img src="/img/basic-dp-algorithm/dp-algorithm-1.png" alt="Knapsack problem 점화식"></p>
<p>알고리즘 설명에 대략적인 설명은 다음과 같다.</p>
<ul>
<li>넣을 물건 또는 가방이 있는가?</li>
<li>현재 들고 있는 물건을 넣기 위한 공간이 충분한가?</li>
<li>들고 있는 물건을 넣었을 때와 넣지 않았을 때 어느 것이 더 좋은가?</li>
</ul>
<p>위 과정을 보면 알 수 있듯 문제를 해결하기 위해서는 모든 경우(각각의 물건을 담았을 경우, 담지 않았을 경우)를 계산하여 항상 제일 나은 선택을 유지하며 계산해야 한다. 이때 사용되는 기법이 메모제이션으로 아래와 같이 사용된다.</p>
<p><img src="/img/basic-dp-algorithm/dp-algorithm-2.jpg" alt="Knapsack problem 과정"></p>
<p>2차원 배열로 가로축은 가방의 현재 무게, 세로 축은 현재 물건의 번호이며 각각의 요소 안에는 제일 나은 선택으로 만들어진 가방의 가치(value)가 기록되며 배열 아래에 물건에 w(weight), v(value)가 기록되어 있다.</p>

		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/Algorithm/">Algorithm</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/algorithm/">algorithm</a>           
			            
				<a class="link" href="/tags/rust-lang/">rust-lang</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/06/10/basic-dp-algorithm/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/05/15/multicoreos64-day5/">64bit 멀티코어 OS 원리와 구조 - Day 5</a>  
	       
		 

		<div class="meta">
			<time>May 15, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h1 id="페이지-기능을-활성화하여-64비트-전환-준비"><a href="#페이지-기능을-활성화하여-64비트-전환-준비" class="headerlink" title="페이지 기능을 활성화하여 64비트 전환 준비"></a>페이지 기능을 활성화하여 64비트 전환 준비</h1><h2 id="선형-주소와-4단계-페이징-기법"><a href="#선형-주소와-4단계-페이징-기법" class="headerlink" title="선형 주소와 4단계 페이징 기법"></a>선형 주소와 4단계 페이징 기법</h2><p>페이징에 사용하는 각 테이블은 512개의 엔트리로 구성되며 다음 레벨에서 사용할 테이블의 기준 주소를 포함한다. 그리고 가장 마지막 레벨인 페이지 디렉터리의 엔트리는 2MB 페이지의 기준 주소를 포함한다.</p>
<blockquote>
<p>책 P.250 내용에 포함된 사진을 보시면 이해가 쉽습니다.</p>
</blockquote>
<p>선형 주소를 실제 물리 주소로 변환하는 과정은 CR3 레지스터에 설정된 PML4 테이블의 기준 주소로 PML4 엔트리 -> 페이지 디렉터리 포인터 엔트리 -> 디렉터리 엔트리로 진행하여 2MB 페이지의 기준 주소를 찾은 다음 선형 주소의 하위 21비트 오프셋을 더하면 된다.</p>
<p>이 과정에서 알 수 있듯이 PML4(Page Map Level 4)에서는 (1)PML4 테이블, (2)페이지 디렉터리 포인터 테이블, (3) 페이지 디렉터리 등 세 가지 자료구조를 생성해야 한다. 각 테이블은 8바이트로 구성되며 각 엔트리는 다음 레벨 테이블의 기준 주소외에도 다양한 필드를 포함한다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/05/15/multicoreos64-day5/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/05/07/raspberry-install/">라즈베리파리 사용</a>  
	       
		 

		<div class="meta">
			<time>May 07, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<h1 id="라즈베리파이"><a href="#라즈베리파이" class="headerlink" title="라즈베리파이"></a>라즈베리파이</h1><p>이번 학기 IOT 프로그래밍 수업을 듣게 되며, 묻혀둔 라즈베리파이를 꺼내 들게 되었다. 꽤 지난 모델이라 설치도 기억이 흐릿해 나중을 위해서라도 이렇게 기록한다.</p>
<h2 id="라즈비안-OS-구하기"><a href="#라즈비안-OS-구하기" class="headerlink" title="라즈비안 OS 구하기"></a>라즈비안 OS 구하기</h2><p>SD카드와 라즈베리파이가 준비된 상태를 전제로 가장 먼저 해야 할 건 라즈비안 OS를 구하는 것이다. 공식 홈페이지는 최신 버전만 찾기 때문에 과거 버전도 모두 있는 <a target="_blank" rel="noopener" href="http://downloads.raspberrypi.org/raspbian/images/">이곳</a>을 이용하는 게 좋다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/Embedded/">Embedded</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/raspberry/">raspberry</a>           
			            
				<a class="link" href="/tags/embedded/">embedded</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/05/07/raspberry-install/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/05/03/multicoreos64-day4/">64bit 멀티코어 OS 원리와 구조 - Day 4</a>  
	       
		 

		<div class="meta">
			<time>May 03, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h1 id="A20-게이트를-활성화하여-1MB-이상-영역에-접근해보자"><a href="#A20-게이트를-활성화하여-1MB-이상-영역에-접근해보자" class="headerlink" title="A20 게이트를 활성화하여 1MB 이상 영역에 접근해보자"></a>A20 게이트를 활성화하여 1MB 이상 영역에 접근해보자</h1><h2 id="IA-32e-모드-커널과-메모리-맵"><a href="#IA-32e-모드-커널과-메모리-맵" class="headerlink" title="IA-32e 모드 커널과 메모리 맵"></a>IA-32e 모드 커널과 메모리 맵</h2><p>왜 1MB 이상의 메모리에 접근해야 하는가에 대해서는 앞서 부트 로더에 의해 커널 이미지가 0x10000 메모리에 로딩되고, 1MB 이하의 어드레스 중에서 비디오 메모리가 위치하는 0xA0000 이하를 커널 공간으로 사용한다고 하면, 보호 모드 커널과 IA-32e 모드 커널의 최대 크기는 <code>0xA0000-0x10000(576KB)</code>이 됩니다. 그리고 이후에 초기화되지 않은 영역(.bss 섹션)이 포함된다면 더 작은 크기를 사용해야 합니다. 이 처럼 별다른 기능을 하지 않는 커널을 사용하게 된다면 문제가 없지만 계속해서 이 상태로 유지한다면 이후 다양한 기능이 추가되며 커널이 커지게 되면 메모리가 부족한 현상이 발생하게 됩니다.</p>
<p>MINT64 OS는 이러한 문제를 해결하려고 커널 이미지를 모두 0x10000 어드레스에 복사하되, 덩치가 큰 IA-32e 모드 커널은 2MB의 어드레스로 복사하여 2MB~6MB(총 4MB의 크기)의 영역을 별도로 할당했습니다. (책 231p의 그림을 보시는게 이해하기 더 좋습니다.)</p>
<h2 id="1MB-어드레스와-A20-게이트"><a href="#1MB-어드레스와-A20-게이트" class="headerlink" title="1MB 어드레스와 A20 게이트"></a>1MB 어드레스와 A20 게이트</h2><p>초창기 XT PC의 최대 어드레스는 1MB였습니다. 만약 하드웨어의 한계로 1MB 이상의 어드레스에 접근하면 하위 주소만 남아 접근하게 되었습니다 (0x10FFEF -> 0xFFEF). 하지만 이후 16MB 주소까지 접근할 수 있는 AT PC가 탄생하면서 XT PC의 특수한 주소 계산법(1MB 이상의 주소를 1MB 이하의 주소로 맵핑) 때문에 문제가 발생합니다. 이 호환성 문제를 해결하기 위해 탄생한게 <code>A20 게이트</code> 입니다.</p>
<p>A20은 주소의 20번째 비트를 의미하며, 이를 활성화/비활성화 함으로 20번째 비트를 항상 0으로 고정할 수 있었습니다. A20 게이트가 비활성화된 상태에서는 20번째 비트가 항상 0을 유지하기 때문에 홀수 MB에 접근할 수 없습니다. 그래서 최초 부팅 이후 1MB<del>4MB의 초기화를 하면 0</del>1MB, 2<del>3MB가 초기화되고 0</del>1MB 영역은 BIOS와 보호 모드 커널 영역으로 사용하고 있으므로 수행중인 부분이 초기화가 되어버립니다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/05/03/multicoreos64-day4/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/05/01/multicoreos64-day3/">64bit 멀티코어 OS 원리와 구조 - Day 3</a>  
	       
		 

		<div class="meta">
			<time>May 01, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h1 id="C언어로-커널을-작성하자"><a href="#C언어로-커널을-작성하자" class="headerlink" title="C언어로 커널을 작성하자"></a>C언어로 커널을 작성하자</h1><h2 id="실행-가능한-C-코드-커널-생성-방법"><a href="#실행-가능한-C-코드-커널-생성-방법" class="headerlink" title="실행 가능한 C 코드 커널 생성 방법"></a>실행 가능한 C 코드 커널 생성 방법</h2><h3 id="빌드-조건과-제약-사항"><a href="#빌드-조건과-제약-사항" class="headerlink" title="빌드 조건과 제약 사항"></a>빌드 조건과 제약 사항</h3><p>지금까지 작성된 코드는 단일 파일로 NASM 컴파일을 통해 바이너리 파일 형태로 만들어졌다. 직전 EntryPoint.s 코드도 단일 파일로 작성되었고, 512byte로 정렬되어 이미지 파일에 결합(Disk.img 파일에 포함)하는 구조다. 이 장에서는 보호 모드 EntryPoint(이하, 엔트리포인트)의 뒷부분에 C언어로 작성한 커널을 연결하고, C 커널의 시작 부분으로 이동하는 것이 목표이다.</p>
<p>먼저, 엔트리 포인트가 C언어 코드를 실행하려면 3가지 제약 조건을 만족해야 한다.</p>
<ul>
<li>C 라이브러리를 사용하지 않게 빌드해야 한다.<ul>
<li>부팅된 후 보호 모드 커널이 실행되면 C 라이브러리가 없음으로 라이브러리에 포함된 함수(printf, scanf, …)를 호출할 수 없다.</li>
</ul>
</li>
<li>0x10200 위치에서 실행하게끔 빌드해야 한다.<ul>
<li>0x10000의 위치에는 이전 장(6장)에서 작성한 EntryPoint.s가 512byte(1 섹터) 만큼 위치하기 때문에 0x1000 + 0x200(512byte) 뒤인 0x10200에 위치해야 한다.</li>
</ul>
</li>
<li>코드나 데이터 외에 기타 정보를 포함하지 않은 순수한 바이너리 파일 형태야 한다.<ul>
<li>GCC를 통해 컴파일하면 ELF 또는 PE 와 같은 OS에 의존적인 실행 파일 포맷으로 생성된다. 이런 파일을 포맷이 포함되게 되면 이 정보를 처리하기 위한 부가적인 복잡한 코드를 생성해야 하기 때문에 순수한 바이너리 파일을 생성해야 한다.</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">> x86_64-pc-linux-gcc.exe -c -m32 -ffreestanding Main.c</span><br></pre></td></tr></tbody></table></figure>

<p>라이브러리를 사용하지 않고 홀로 사용하기 위해서 GCC 컴파일러는 <code>-ffreestanding</code>옵션을 지원하고 있으며, <code>-c</code>과 함께 라이브러리를 사용하지 않는 오브젝트 파일을 생성할 수 있다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/05/01/multicoreos64-day3/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/04/30/archlinux-install/">Arch linux 설치하기</a>  
	       
		 

		<div class="meta">
			<time>Apr 30, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 인터넷에 작성된 Arch linux를 설치하는 방법을 개인적으로 정리한 글입니다. 글의 대부분의 내용은 아래 ‘레퍼런스’에 출처가 작성되어있으니 자세한 내용을 원본 글에서 참조하시는걸 추천해 드립니다.</p>
</blockquote>
<p><img src="/img/archlinux-install/archlinux-install-1.jpg" alt="ArchLinux Install"></p>
<p>Arch Linux를 설치하며 가상 먼저 하는 것은 당연히 arch linux의 설치 ISO 파일을 구하는 것부터 시작된다. 먼저 PC에서 설치하는 것보단 Virtual Box 같은 가상 PC에서 설치하기 위해서 USB에 굽는 과정을 생략했다.</p>
<p>먼저 한국 미러링 서버에서 받기 원한다면 <a target="_blank" rel="noopener" href="https://ftp.lanet.kr/pub/archlinux/iso/2020.04.01/">이곳</a>에서 다운로드받을 수 있다. 다른 나라를 이용하고 싶다면 <a target="_blank" rel="noopener" href="https://www.archlinux.org/download/">이곳</a>에서 원하는 나라의 미러링 서버를 확인할 수 있다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/Linux/">Linux</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/archlinux/">archlinux</a>           
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/linux/">linux</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/04/30/archlinux-install/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/04/29/multicoreos64-day2/">64bit 멀티코어 OS 원리와 구조 - Day 2</a>  
	       
		 

		<div class="meta">
			<time>Apr 29, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h2 id="이미지-로딩-구현"><a href="#이미지-로딩-구현" class="headerlink" title="이미지 로딩 구현"></a>이미지 로딩 구현</h2><p>책에서 구현하게 될 OS는 부트 로더, 보호 모드 커널, IA-32e 모드 커널로 구성되고 섹터 단위로 정렬되 하나의 부팅 이미지로 만들어지며 두 번째 섹터부터 읽어 메모리에 복사하면 이미지 로딩이 끝나게 된다. 책에서 구현하는 OS는 메모리 0x10000번지에 복사하게 되며, 이 주소는 정해진게 아니라 부트 로더 이후에 바로 복사해도 되지만, 책의 뒷장에서 0x10000 이하 번지를 다른 용도로 사용하기 위해서 비워둔다. </p>
<p>x86 프로세서는 스택과 관련된 레지스터가 3개 있는데 SS, SP, BP가 있다. 이때 SS를 어떻게 설정하느냐에 따라서 스택의 크기가 달라지는데 예를 들어 SS를 <code>0x0000</code>으로 설정한다면 <code>0x00000~0x0FFFF</code> SS를 <code>0x1000</code>으로 설정하면 <code>0x010000~0x01FFFF</code>까지 된다. 이렇게 SS를 통해서 스택의 범위를 지정할 순 있지만, 스택의 크기는 정하지 못하는데 32bit의 스택 한 칸의 크기는 4byte이다. </p>
<h2 id="리얼-모드에서-보호-모드로의-전환"><a href="#리얼-모드에서-보호-모드로의-전환" class="headerlink" title="리얼 모드에서 보호 모드로의 전환"></a>리얼 모드에서 보호 모드로의 전환</h2><p>보호 모드로 전환하는 단계는 크게 6단계라고 할 수 있다. 2단계는 보호 모드 전환을 위한 자료구조 생성, 나머지 4단계는 생성된 자료구조를 프로세서에 설정을 한다. 2단계에서 생성할 필수 자료구조는 <code>세그먼트 디스크립터</code>와 <code>GDT</code>이다. 이 두 자료구조는 전환 즉시 프로세서에 의해 참조되므로 미리 생성해야 한다.</p>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/04/29/multicoreos64-day2/">Continue</a> 	
	</div>	
    
</article>

	
	
	
	

<article class="article">		
	   
	<div class="article-header">
	    
		<a class="title" href="/2020/04/28/multicoreos64-day1/">64bit 멀티코어 OS 원리와 구조 - Day 1</a>  
	       
		 

		<div class="meta">
			<time>Apr 28, 2020</time>			
		</div>
	</div>


	

    
	<div class="typo article-excerpt">	
		
			<blockquote>
<p>이 글은 ‘64비트 멀티코어 OS 원리와 구조 - 한승훈 저자’을 공부하며 정리한 내용을 작성했습니다.</p>
</blockquote>
<h2 id="세상에서-가장-간단한-BootLoader"><a href="#세상에서-가장-간단한-BootLoader" class="headerlink" title="세상에서 가장 간단한 BootLoader"></a>세상에서 가장 간단한 BootLoader</h2><p>부트 로더를 정상적으로 불러오기 위해서는 한가지 규칙이 있다. 먼저 부트 섹터 512Byte의 마지막 2Byte는 반드시 0x55, 0xAA를 가져야 한다. 아래는 세상에서 가장 간단한 부트로더를 작성한 소스 코드이다.</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ORG 0x00]</span><br><span class="line">[BITS 16]</span><br><span class="line"></span><br><span class="line">SECTION .text</span><br><span class="line">jmp $</span><br><span class="line">times 510 - ($ - $$)	db	0x00</span><br><span class="line">db 0x55</span><br><span class="line">db 0xAA</span><br></pre></td></tr></tbody></table></figure>

<p>위 코드에서 <code>[ORG 0x00]</code>은 0x00 메모리 주소에서 시작한다는 의미이며, <code>[BITS 16]</code>은 아래 코드는 16bit라고 알려준다. <code>SECTION .text</code>은 .text 섹션의 시작을 의미하고 <code>jmp $</code>은 현재 위치에서 무한 Loop을 하며 대기하게 한다. 여기까지 총 몇 Byte가 작성된 지 소스 코드로는 확인이 어렵기에 510byte (512byte에서 마지막 0x55, 0xAA 2byte를 뺀 숫자)만큼 채우기 위해서 <code>times 510 - ($ - $$) db 0x00</code>이라고 표현한다. 이 의미는 $(현재 주소)이에서 $$(섹션의 주소)를 뺀 값, 다시 말해 총 생성된 opcode 크기를 뺀 나머지를 <code>0x00</code>으로 채우겠다는 의미이다. 이후 <code>0x55, 0xAA</code>를 채우면 정확히 512byte 크기의 바이너리 파일이 생성되게 된다.</p>
<h2 id="화면-버퍼-제어"><a href="#화면-버퍼-제어" class="headerlink" title="화면 버퍼 제어"></a>화면 버퍼 제어</h2><p>어릴 적 컴퓨터를 키면 깜빡이는 커서와 함께 뜻 모를 영어들이 주룩주룩 나오는 걸 본 기억이 있다. 현재 작성된 Boot Loader에 위와 같은 기능을 구현하기 위해서는 <code>비디오 메모리</code>에 형식에 맞춰 데이터를 넣어주는 거로 구현할 수 있다. 그러기 위해선 비디오 메모리의 시작 주소 <code>0xB8000</code>에 문자 1 Byte, 속성 1 Byte 총 2 Byte인 형식에 맞춰 가로 80, 세로 25자 총 <code>4000 Byte</code>에 작성하게 된다.</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">... 생략 ...</span><br><span class="line">SECTION .text</span><br><span class="line">mov ax, 0xb800</span><br><span class="line">mov ds, ax</span><br><span class="line">mov byte[0x00], 'J'</span><br><span class="line">mov byte[0x01], 0x4A</span><br><span class="line">jmp $</span><br><span class="line">... 생략 ...</span><br></pre></td></tr></tbody></table></figure>

<p>이렇게 작성하고 QEMU를 실행하면 첫 글자가 빨간 배경의 J가 보이게 된다.</p>
<h2 id="세그먼트-초기화"><a href="#세그먼트-초기화" class="headerlink" title="세그먼트 초기화"></a>세그먼트 초기화</h2>
		  	  
	</div>



	<div class="article-categories">
	 
      <i class="iconfont icon-category" style="margin-right:4px"></i>
	  	            
				<a class="link" href="/categories/CE/">CE</a>           
		            
				<a class="link" href="/categories/CE/OS/">OS</a>           
		
      
	</div>
	

	<div class="article-tags">
		
			<i class="iconfont icon-tags" style="margin-right:4px"></i>
			            
				<a class="link" href="/tags/os/">os</a>           
			            
				<a class="link" href="/tags/kernel/">kernel</a>           
			            
				<a class="link" href="/tags/bootloader/">bootloader</a>           
			
		
	</div>

	<div class="article-bottom">
		<a class="readmore" href="/2020/04/28/multicoreos64-day1/">Continue</a> 	
	</div>	
    
</article>

	
	

	
	
 
   <nav class="paginator">
    

   <span class="page-number"> Page <strong>1</strong>, Posts <strong>13</strong>. </span>

    
        <a class="next" href="/page/2/"> 
            Next
            <i class="iconfont icon-right"></i>
        </a>
    
  </nav> 

	

    <script type="text/x-mathjax-config">
        var post = document.getElementsByClassName("post")[0];  
        MathJax.Hub.Config({
            showProcessingMessages: false,
            messageStyle: "none",    
            tex2jax: {
                inlineMath:  [ ["$", "$"] , ["\\(","\\)"]],
                displayMath: [ ["$$","$$"] , ["\\[","\\]"]],
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'],
            },
            "HTML-CSS": {            
                showMathMenu: false
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub,post]);
    </script>
    <style>.MathJax{outline:0;}</style>

    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.2/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
</i></i></i></i></i></i></div><i class="iconfont icon-Weibo"><i class="iconfont icon-Twitter"><i class="iconfont icon-instagram"><i class="iconfont icon-Neteasemusic"><i class="iconfont icon-Telegram">
          </i></i></i></i></i></div><i class="iconfont icon-Weibo"><i class="iconfont icon-Twitter"><i class="iconfont icon-instagram"><i class="iconfont icon-Neteasemusic"><i class="iconfont icon-Telegram"> 
      </i></i></i></i></i></div><i class="iconfont icon-Weibo"><i class="iconfont icon-Twitter"><i class="iconfont icon-instagram"><i class="iconfont icon-Neteasemusic"><i class="iconfont icon-Telegram">            
    
        <i id="toTop" class="iconfont icon-backtotop"></i>

  
    <div class="none" id="search">
    <div class="header">
        <input type="text" placeholder="Typing Something here." id="search-input" class="input">
        
        <i id="search-cancel" class="iconfont icon-cancel"></i>
    </div>

    <div id="search-result" class="result"></div>
</div>
     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon lazyload" src="/images/placeholder.png" data-src="/images/favicon.png">  
      

         
            

            <a class="mobile-menu-link" href="/">Home
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">Archives
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">Tags
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">About
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">Search </a>                 
            
         
      
</div>
        
    



     
    


<footer class="footer">
	<div class="inner">
		<div class="copyright">
			©
			
			2019 -
			
			2020
			Lemon

			<br>
			By <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Lemonreds/hexo-theme-Nayo" target="_blank">Nayo</a>
		</div>
	</div>
</footer>   

    
<script src="/nayo.bundle.js"></script>
           
          
</i></i></i></i></i></i></i></i></i></i></body></html>